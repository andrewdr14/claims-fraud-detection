<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fraud Detection Results</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <header>
        <h1>Motor Insurance Fraud Detection</h1>
    </header>

    <section>
        <h2>ðŸ“Š Summary Statistics</h2>
        <p><strong>Total Policy Holders:</strong> {{ summary_stats["Total Policy Holders"] }}</p>
        <p><strong>Fraud Reported:</strong> {{ summary_stats["Fraud Reported"] }}</p>
        <p><strong>No Fraud Reported:</strong> {{ summary_stats["No Fraud Reported"] }}</p>
    </section>

    <section>
        <h2>ðŸ›¡ Random Forest Results</h2>
        <table>
            <tr>
                <th>Metric</th>
                <th>Class 0 (No Fraud)</th>
                <th>Class 1 (Fraud)</th>
                <th>Macro Avg</th>
                <th>Weighted Avg</th>
            </tr>
            <tr>
                <td>Precision</td>
                <td>{{ rf_results["0"]["precision"] | round(2) }}</td>
                <td>{{ rf_results["1"]["precision"] | round(2) }}</td>
                <td>{{ rf_results["macro avg"]["precision"] | round(2) }}</td>
                <td>{{ rf_results["weighted avg"]["precision"] | round(2) }}</td>
            </tr>
            <tr>
                <td>Recall</td>
                <td>{{ rf_results["0"]["recall"] | round(2) }}</td>
                <td>{{ rf_results["1"]["recall"] | round(2) }}</td>
                <td>{{ rf_results["macro avg"]["recall"] | round(2) }}</td>
                <td>{{ rf_results["weighted avg"]["recall"] | round(2) }}</td>
            </tr>
            <tr>
                <td>F1-Score</td>
                <td>{{ rf_results["0"]["f1-score"] | round(2) }}</td>
                <td>{{ rf_results["1"]["f1-score"] | round(2) }}</td>
                <td>{{ rf_results["macro avg"]["f1-score"] | round(2) }}</td>
                <td>{{ rf_results["weighted avg"]["f1-score"] | round(2) }}</td>
            </tr>
        </table>
    </section>

    <section>
        <h2>âš¡ XGBoost Results</h2>
        <table>
            <tr>
                <th>Metric</th>
                <th>Class 0 (No Fraud)</th>
                <th>Class 1 (Fraud)</th>
                <th>Macro Avg</th>
                <th>Weighted Avg</th>
            </tr>
            <tr>
                <td>Precision</td>
                <td>{{ xgb_results["0"]["precision"] | round(2) }}</td>
                <td>{{ xgb_results["1"]["precision"] | round(2) }}</td>
                <td>{{ xgb_results["macro avg"]["precision"] | round(2) }}</td>
                <td>{{ xgb_results["weighted avg"]["precision"] | round(2) }}</td>
            </tr>
            <tr>
                <td>Recall</td>
                <td>{{ xgb_results["0"]["recall"] | round(2) }}</td>
                <td>{{ xgb_results["1"]["recall"] | round(2) }}</td>
                <td>{{ xgb_results["macro avg"]["recall"] | round(2) }}</td>
                <td>{{ xgb_results["weighted avg"]["recall"] | round(2) }}</td>
            </tr>
            <tr>
                <td>F1-Score</td>
                <td>{{ xgb_results["0"]["f1-score"] | round(2) }}</td>
                <td>{{ xgb_results["1"]["f1-score"] | round(2) }}</td>
                <td>{{ xgb_results["macro avg"]["f1-score"] | round(2) }}</td>
                <td>{{ xgb_results["weighted avg"]["f1-score"] | round(2) }}</td>
            </tr>
        </table>
    </section>

    <footer>
        <p>&copy; 2025 Fraud Detection System</p>
    </footer>
</body>
</html>